{"version":3,"sources":["lib/display/mode_state.js"],"names":["define","a","b","c","resetModeState","cm","doc","iter","line","stateAfter","styles","modeFrontier","highlightFrontier","first","startWorker","state","modeGen","curOp","regChange","loadMode","mode","getMode","options","modeOption"],"mappings":";;;;;;;AAAAA,QACI,WACA,qBACA,mBACD,SAAUC,EAAGC,EAAGC,GACf,aAKA,SAASC,EAAeC,GACpBA,EAAGC,IAAIC,KAAKC,IACJA,EAAKC,aACLD,EAAKC,WAAa,MAClBD,EAAKE,SACLF,EAAKE,OAAS,QAEtBL,EAAGC,IAAIK,aAAeN,EAAGC,IAAIM,kBAAoBP,EAAGC,IAAIO,MACxDX,EAAEY,YAAYT,EAAI,KAClBA,EAAGU,MAAMC,UACLX,EAAGY,OACHd,EAAEe,UAAUb,GAEpB,OACIc,SAlBJ,SAAkBd,GACdA,EAAGC,IAAIc,KAAOnB,EAAEoB,QAAQhB,EAAGiB,QAASjB,EAAGC,IAAIiB,YAC3CnB,EAAeC,IAiBfD,eAAgBA","file":"../../../lib/display/mode_state.js","sourcesContent":["define([\n    '../modes',\n    './highlight_worker',\n    './view_tracking'\n], function (a, b, c) {\n    'use strict';\n    function loadMode(cm) {\n        cm.doc.mode = a.getMode(cm.options, cm.doc.modeOption);\n        resetModeState(cm);\n    }\n    function resetModeState(cm) {\n        cm.doc.iter(line => {\n            if (line.stateAfter)\n                line.stateAfter = null;\n            if (line.styles)\n                line.styles = null;\n        });\n        cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n        b.startWorker(cm, 100);\n        cm.state.modeGen++;\n        if (cm.curOp)\n            c.regChange(cm);\n    }\n    return {\n        loadMode: loadMode,\n        resetModeState: resetModeState\n    };\n});"]}