{"version":3,"sources":["primitives/line/pos.js"],"names":["define","a","Pos","line","ch","sticky","this","cmp","b","clipPos","doc","pos","first","last","size","getLine","text","length","linelen","clipToLen","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","n","Math","max","min","clipPosArray","array","out","i"],"mappings":";;;;;;;AAAAA,QAAQ,gBAAiB,SAAUC,GAC/B,aACA,SAASC,EAAIC,EAAMC,EAAIC,EAAS,MAC5B,KAAMC,gBAAgBJ,GAClB,OAAO,IAAIA,EAAIC,EAAMC,EAAIC,GAC7BC,KAAKH,KAAOA,EACZG,KAAKF,GAAKA,EACVE,KAAKD,OAASA,EAElB,SAASE,EAAIN,EAAGO,GACZ,OAAOP,EAAEE,KAAOK,EAAEL,MAAQF,EAAEG,GAAKI,EAAEJ,GAiBvC,SAASK,EAAQC,EAAKC,GAClB,GAAIA,EAAIR,KAAOO,EAAIE,MACf,OAAOV,EAAIQ,EAAIE,MAAO,GAC1B,IAAIC,EAAOH,EAAIE,MAAQF,EAAII,KAAO,EAClC,OAAIH,EAAIR,KAAOU,EACJX,EAAIW,EAAMZ,EAAEc,QAAQL,EAAKG,GAAMG,KAAKC,QAGnD,SAAmBN,EAAKO,GACpB,IAAId,EAAKO,EAAIP,GACb,OAAU,MAANA,GAAcA,EAAKc,EACZhB,EAAIS,EAAIR,KAAMe,GAChBd,EAAK,EACHF,EAAIS,EAAIR,KAAM,GAEdQ,EATJQ,CAAUR,EAAKV,EAAEc,QAAQL,EAAKC,EAAIR,MAAMa,KAAKC,QAiBxD,OACIf,IAAKA,EACLK,IAAKA,EACLa,eAzCJ,SAAwBnB,EAAGO,GACvB,OAAOP,EAAEI,QAAUG,EAAEH,QAAuB,GAAbE,EAAIN,EAAGO,IAyCtCa,QAvCJ,SAAiBC,GACb,OAAOpB,EAAIoB,EAAEnB,KAAMmB,EAAElB,KAuCrBmB,OArCJ,SAAgBtB,EAAGO,GACf,OAAOD,EAAIN,EAAGO,GAAK,EAAIA,EAAIP,GAqC3BuB,OAnCJ,SAAgBvB,EAAGO,GACf,OAAOD,EAAIN,EAAGO,GAAK,EAAIP,EAAIO,GAmC3BiB,SAjCJ,SAAkBf,EAAKgB,GACnB,OAAOC,KAAKC,IAAIlB,EAAIE,MAAOe,KAAKE,IAAIH,EAAGhB,EAAIE,MAAQF,EAAII,KAAO,KAiC9DL,QAASA,EACTqB,aAfJ,SAAsBpB,EAAKqB,GACvB,IAAIC,KACJ,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAMd,OAAQgB,IAC9BD,EAAIC,GAAKxB,EAAQC,EAAKqB,EAAME,IAChC,OAAOD","file":"../../../primitives/line/pos.js","sourcesContent":["define(['./utils_line'], function (a) {\n    'use strict';\n    function Pos(line, ch, sticky = null) {\n        if (!(this instanceof Pos))\n            return new Pos(line, ch, sticky);\n        this.line = line;\n        this.ch = ch;\n        this.sticky = sticky;\n    }\n    function cmp(a, b) {\n        return a.line - b.line || a.ch - b.ch;\n    }\n    function equalCursorPos(a, b) {\n        return a.sticky == b.sticky && cmp(a, b) == 0;\n    }\n    function copyPos(x) {\n        return Pos(x.line, x.ch);\n    }\n    function maxPos(a, b) {\n        return cmp(a, b) < 0 ? b : a;\n    }\n    function minPos(a, b) {\n        return cmp(a, b) < 0 ? a : b;\n    }\n    function clipLine(doc, n) {\n        return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n    }\n    function clipPos(doc, pos) {\n        if (pos.line < doc.first)\n            return Pos(doc.first, 0);\n        let last = doc.first + doc.size - 1;\n        if (pos.line > last)\n            return Pos(last, a.getLine(doc, last).text.length);\n        return clipToLen(pos, a.getLine(doc, pos.line).text.length);\n    }\n    function clipToLen(pos, linelen) {\n        let ch = pos.ch;\n        if (ch == null || ch > linelen)\n            return Pos(pos.line, linelen);\n        else if (ch < 0)\n            return Pos(pos.line, 0);\n        else\n            return pos;\n    }\n    function clipPosArray(doc, array) {\n        let out = [];\n        for (let i = 0; i < array.length; i++)\n            out[i] = clipPos(doc, array[i]);\n        return out;\n    }\n    return {\n        Pos: Pos,\n        cmp: cmp,\n        equalCursorPos: equalCursorPos,\n        copyPos: copyPos,\n        maxPos: maxPos,\n        minPos: minPos,\n        clipLine: clipLine,\n        clipPos: clipPos,\n        clipPosArray: clipPosArray\n    };\n});"]}